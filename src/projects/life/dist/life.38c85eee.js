const e=document.getElementById("canvas"),t=e.getContext("2d");let a=[],n=!1,o=!1,r=0,d=!1,c=!1,s=10,i=0;const l=()=>{for(let t=0;t<e.height/10;t++){a[t]=[];for(let n=0;n<e.width/10;n++)a[t][n]=0}},f=()=>{const e=[],t=(e,t)=>a[e]&&a[e][t];a.forEach(((a,n)=>{e[n]=[],a.forEach(((a,o)=>{let r=((e,a)=>{let n=0;for(let o=a-1;o<=a+1;o++)for(let r=e-1;r<=e+1;r++)r===e&&o===a||!t(r,o)||n++;return n})(n,o);e[n][o]=a?2===r||3===r?1:0:3===r?1:0}))})),a=[...e]},m=()=>{E("delay",s),E("generation",i)},h=()=>{t.clearRect(0,0,e.width,e.height),a.forEach(((e,a)=>{e.forEach(((e,n)=>{t.fillStyle=e?"#4dc74a":"#222222",t.fillRect(10*n+1,10*a+1,9,9)}))})),m(),n&&!d&&(d=!0,c=setTimeout((()=>{d=!1,f(),i++}),s)),requestAnimationFrame(h)},u=()=>{clearTimeout(c),e.height=document.getElementById("canvas-wrapper").clientHeight,e.width=document.getElementById("canvas-wrapper").clientWidth,n=!1,d=!1,i=0,l(),m()};e.addEventListener("mousedown",(e=>{const t=Math.floor(e.offsetX/10),n=Math.floor(e.offsetY/10);r=!a[n][t],a[n][t]=a[n][t]?0:1,o=!0})),e.addEventListener("mouseup",(e=>{o=!1})),e.addEventListener("mousemove",(e=>{if(o){const t=Math.floor(e.offsetX/10),n=Math.floor(e.offsetY/10);a[n][t]=r}})),window.addEventListener("keydown",(e=>{switch(e.code){case"Space":n=!n;break;case"KeyR":u();break;case"ArrowUp":s+=1;break;case"ArrowDown":s-=s>0?1:0}}));const p=e=>document.getElementById(e),w=(e,t=e)=>{p("parameter-readout").insertAdjacentHTML("beforeend",`<p name="param-${e}">${t}: <span name="${e}-value"></span></p>`)},E=(e,t)=>{const a=((e,t)=>e.querySelector(`span[name=${t}]`))(p("parameter-readout"),`${e}-value`);a.innerHTML=t};window.addEventListener("resize",u),w("generation","Generation"),w("delay","Delay"),u(),l(),h();
//# sourceMappingURL=life.38c85eee.js.map
